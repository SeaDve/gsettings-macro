<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="GSettings Macro"><title>gsettings_macro - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-84e720fa.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="gsettings_macro" data-themes="" data-resource-suffix="" data-rustdoc-version="1.89.0 (29483883e 2025-08-04)" data-channel="1.89.0" data-search-js="search-92309212.js" data-settings-js="settings-5514c975.js" ><script src="../static.files/storage-4e99c027.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-fd3af306.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../gsettings_macro/index.html">gsettings_<wbr>macro</a><span class="version">0.2.2</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#gsettings-macro" title="GSettings Macro">GSettings Macro</a><ul><li><a href="#example" title="Example">Example</a></li><li><a href="#generated-methods" title="Generated methods">Generated methods</a></li><li><a href="#known-issues" title="Known issues">Known issues</a></li><li><a href="#license" title="License">License</a></li></ul></li></ul><h3><a href="#attributes">Crate Items</a></h3><ul class="block"><li><a href="#attributes" title="Attribute Macros">Attribute Macros</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>gsettings_macro</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/gsettings_macro/lib.rs.html#1-541">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="gsettings-macro"><a class="doc-anchor" href="#gsettings-macro">§</a>GSettings Macro</h2>
<p><a href="https://github.com/SeaDve/gsettings-macro"><img src="https://img.shields.io/badge/github-seadve/gsettings-macro" alt="github" /></a>
<a href="https://crates.io/crates/gsettings-macro"><img src="https://img.shields.io/crates/v/gsettings-macro" alt="crates.io" /></a>
<a href="https://docs.rs/gsettings-macro/"><img src="https://docs.rs/gsettings-macro/badge.svg" alt="docs" /></a>
<a href="https://github.com/SeaDve/gsettings-macro/actions/workflows/ci.yml"><img src="https://github.com/SeaDve/gsettings-macro/actions/workflows/ci.yml/badge.svg" alt="CI" /></a></p>
<p>Macro for typesafe GSettings key access</p>
<p>The macro’s main purpose is to reduce the risk of mistyping a key,
using the wrong method to access values, inputting incorrect values,
and to reduce boilerplate. Additionally, the summary, description,
and default value are included in the documentation of each generated
method. This would be beneficial if you use tools like
<a href="https://rust-analyzer.github.io/"><code>rust-analyzer</code></a>.</p>
<h3 id="example"><a class="doc-anchor" href="#example">§</a>Example</h3>
<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">use </span>gsettings_macro::gen_settings;
<span class="kw">use </span>gio::glib;

<span class="kw">use </span>std::path::{Path, PathBuf};

<span class="attr">#[gen_settings(
    file = <span class="string">"./tests/io.github.seadve.test.gschema.xml"</span>,
    id = <span class="string">"io.github.seadve.test"
</span>)]
#[gen_settings_define(
    key_name = <span class="string">"cache-dir"</span>,
    arg_type = <span class="string">"&amp;Path"</span>,
    ret_type = <span class="string">"PathBuf"
</span>)]
#[gen_settings_skip(signature = <span class="string">"(ss)"</span>)]
</span><span class="kw">pub struct </span>ApplicationSettings;

<span class="kw">let </span>settings = ApplicationSettings::default();

<span class="comment">// `i` D-Bus type
</span>settings.set_window_width(<span class="number">100</span>);
<span class="macro">assert_eq!</span>(settings.window_width(), <span class="number">100</span>);

<span class="comment">// enums
</span>settings.set_alert_sound(AlertSound::Glass);
<span class="macro">assert_eq!</span>(settings.alert_sound(), AlertSound::Glass);

<span class="comment">// bitflags
</span>settings.set_space_style(SpaceStyle::BEFORE_COLON | SpaceStyle::BEFORE_COMMA);
<span class="macro">assert_eq!</span>(
    settings.space_style(),
    SpaceStyle::BEFORE_COLON | SpaceStyle::BEFORE_COMMA
);

<span class="comment">// customly defined
</span>settings.set_cache_dir(Path::new(<span class="string">"/some_dir/"</span>));
<span class="macro">assert_eq!</span>(settings.cache_dir(), PathBuf::from(<span class="string">"/some_dir/"</span>));</code></pre></div>
<p>For more examples and detailed information see the
<a href="https://seadve.github.io/gsettings-macro/gsettings_macro/attr.gen_settings.html">documentation</a>.</p>
<p>There are also real-world examples of this library being used in <a href="https://github.com/SeaDve/Mousai">Mousai</a>
and <a href="https://github.com/SeaDve/Kooha">Kooha</a>, a music recognizer and a screen recorder application, respectively.</p>
<h3 id="generated-methods"><a class="doc-anchor" href="#generated-methods">§</a>Generated methods</h3>
<p>The procedural macro generates the following <a href="https://docs.rs/gio/latest/gio/struct.Settings.html"><code>gio::Settings</code></a> methods
for each key in the schema:</p>
<ul>
<li><code>set</code> -&gt; <code>set_${key}</code>, which panics when writing in a readonly
key, and <code>try_set_${key}</code>, which behaves the same as the original method.</li>
<li><code>get</code> -&gt; <code>${key}</code></li>
<li><code>connect_changed</code> -&gt; <code>connect_${key}_changed</code></li>
<li><code>bind</code> -&gt; <code>bind_${key}</code></li>
<li><code>create_action</code> -&gt; <code>create_${key}_action</code></li>
<li><code>default_value</code> -&gt; <code>${key}_default_value</code></li>
<li><code>reset</code> -&gt; <code>reset_${key}</code></li>
</ul>
<h3 id="known-issues"><a class="doc-anchor" href="#known-issues">§</a>Known issues</h3>
<ul>
<li>Not updating when the gschema file is modified
<ul>
<li>Use hacks like <code>include_str!</code></li>
<li>See <a href="https://github.com/rust-lang/rust/issues/73921">#73921</a> or <a href="https://github.com/rust-lang/rust/issues/55904">#55904</a></li>
</ul>
</li>
</ul>
<h3 id="license"><a class="doc-anchor" href="#license">§</a>License</h3>
<p>Copyright 2023 Dave Patrick Caberto</p>
<p>This software is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of the MPL was not distributed with this file, You can obtain one at <a href="http://mozilla.org/MPL/2.0/">this site</a>.</p>
</div></details><h2 id="attributes" class="section-header">Attribute Macros<a href="#attributes" class="anchor">§</a></h2><dl class="item-table"><dt><a class="attr" href="attr.gen_settings.html" title="attr gsettings_macro::gen_settings">gen_<wbr>settings</a></dt><dd>Macro for typesafe <a href="https://docs.rs/gio/latest/gio/struct.Settings.html"><code>gio::Settings</code></a> key access.</dd></dl></section></div></main></body></html>